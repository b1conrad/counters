ruleset net.sanbachs.counters.fragments {
  meta {
    shares __testing, number
  }
  global {
    __testing = { "queries": [ { "name": "__testing" },
                               { "name": "number", "args": [ "n" ] } ],
                  "events": [ ] }
    H1 = [71,73,70,56,57,97,10,0,20,0,128,0,1,0,0,0,255,255,255];
    H2 = [71,73,70,56,57,97,20,0,20,0,128,0,1,0,0,0,255,255,255];
    H3 = [71,73,70,56,57,97,30,0,20,0,128,0,1,0,0,0,255,255,255];
    H4 = [71,73,70,56,57,97,40,0,20,0,128,0,1,0,0,0,255,255,255];
    H5 = [71,73,70,56,57,97,50,0,20,0,128,0,1,0,0,0,255,255,255];
    H6 = [71,73,70,56,57,97,60,0,20,0,128,0,1,0,0,0,255,255,255];
    H7 = [71,73,70,56,57,97,70,0,20,0,128,0,1,0,0,0,255,255,255];
    H8 = [71,73,70,56,57,97,80,0,20,0,128,0,1,0,0,0,255,255,255];
    H9 = [71,73,70,56,57,97,90,0,20,0,128,0,1,0,0,0,255,255,255];
    HX = [71,73,70,56,57,97,100,0,20,0,128,0,1,0,0,0,255,255,255];
    P0 = [0];
    P1 = [10];
    P2 = [20];
    P3 = [30];
    P4 = [40];
    P5 = [50];
    P6 = [60];
    P7 = [70];
    P8 = [80];
    P9 = [90];
    D0 = [0,0,0,10,0,20,0,0,8,47,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,161,64,0,16,1,20,148,56,144,226,67,130,22,3,100,220,136,177,99,69,143,23,63,138,12,73,242,97,196,134,1,255,0];
    D1 = [0,0,0,10,0,20,0,0,8,44,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,225,64,0,0,12,66,12,16,17,97,197,131,23,37,38,204,88,144,35,65,143,15,37,66,28,9,146,96,192,0];
    D2 = [0,0,0,10,0,20,0,0,8,45,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,161,64,0,16,33,18,4,80,144,226,195,138,9,45,26,212,56,145,227,64,143,31,17,122,212,24,177,228,194,128,0];
    D3 = [0,0,0,10,0,20,0,0,8,44,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,225,64,0,16,1,16,132,56,49,161,68,132,23,39,82,196,168,48,163,193,140,30,3,120,140,184,81,97,192,0];
    D4 = [0,0,0,10,0,20,0,0,8,44,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,97,65,0,8,1,64,52,8,113,34,193,137,22,7,98,124,168,241,161,196,143,17,19,102,212,8,114,97,192,0];
    D5 = [0,0,0,10,0,20,0,0,8,43,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,161,64,0,16,33,22,4,144,144,34,66,139,7,35,74,172,200,241,226,64,140,15,9,106,4,137,48,224,0];
    D6 = [0,0,0,10,0,20,0,0,8,47,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,33,65,0,16,1,20,148,120,144,162,65,139,23,3,68,196,8,241,225,64,140,26,63,78,20,233,241,227,70,134,1,255,0];
    D7 = [0,0,0,10,0,20,0,0,8,43,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,97,0,0,16,35,2,24,56,145,96,197,131,23,11,102,212,136,112,163,197,132,30,5,134,20,233,48,224,0];
    D8 = [0,0,0,10,0,20,0,0,8,48,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,161,64,0,16,1,20,148,56,144,226,67,130,22,3,100,204,168,49,226,68,140,32,43,134,188,40,178,100,69,143,12,3,254,0];
    D9 = [0,0,0,10,0,20,0,0,8,48,0,3,8,28,72,176,160,193,131,8,19,42,92,200,176,161,64,0,16,1,20,148,56,144,226,67,130,22,3,100,220,88,49,163,70,136,26,19,122,172,136,112,100,68,135,1,2,254,0];
    H = [H1,H2,H3,H4,H5,H6,H7,H8,H9,HX];
    S = [44];
    P = [P0,P1,P2,P3,P4,P5,P6,P7,P8,P9];
    D = [D0,D1,D2,D3,D4,D5,D6,D7,D8,D9];
    T = [59];
    flt = function(a,v){a.append(v)};
    dgt = function(v,k) {S.append(P[k]).append(D[v])};
    number = function(n) {
      num = n.as("String");
      H[num.length()-1].append(num.split(re##).map(dgt).reduce(flt,[])).append(T)
    }
  }
}
